<Window x:Class="OfflineProjectManager.Views.ProjectActionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:OfflineProjectManager.Views.Controls"
        Title="Project Actions" 
        Height="420" 
        Width="500"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded">
    
    <Window.Resources>
        <!-- Section Header Style -->
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#858585"/>
            <Setter Property="Margin" Value="16,16,0,8"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
        </Style>
    </Window.Resources>

    <!-- Main Border with VS Code Colors -->
    <Border Background="#1E1E1E"
            BorderBrush="#3F3F46"
            BorderThickness="1"
            CornerRadius="6">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0"
                    Background="#2D2D30"
                    BorderBrush="#3F3F46"
                    BorderThickness="0,0,0,1"
                    CornerRadius="6,6,0,0">
                <Grid Height="36">
                    <TextBlock Text="Project Actions"
                               Foreground="#CCCCCC"
                               FontSize="13"
                               FontFamily="Segoe UI"
                               VerticalAlignment="Center"
                               Margin="16,0,0,0"/>
                    
                    <!-- Close Button -->
                    <Button Content="Ã—"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Width="36"
                            Height="36"
                            FontSize="20"
                            Foreground="#999999"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="CloseButton_Click"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#E81123"/>
                                                    <Setter Property="Foreground" Value="White"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </Border>

            <!-- Content -->
            <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Padding="0,8,0,16">
                <ItemsControl ItemsSource="{Binding ActionGroups}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <!-- Section Header -->
                                <TextBlock Text="{Binding Header}"
                                          Style="{StaticResource SectionHeaderStyle}"/>
                                
                                <!-- Action Items -->
                                <ItemsControl ItemsSource="{Binding Items}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <controls:ActionItemControl DataContext="{Binding}"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
